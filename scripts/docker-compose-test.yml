version: "3.4"
services:

  postgresqltest:
    image: cytomine/postgis:v2.0.0
    restart: unless-stopped
    ports: [ "5433:5432" ]

  mongodbtest:
    image: mongo:4.4
    restart: unless-stopped
    ports: [ "27018:27017" ]
    environment:
      - MONGO_INITDB_ROOT_USERNAME=mongoadmin
      - MONGO_INITDB_ROOT_PASSWORD=secret
      - MONGO_INITDB_DATABASE=cytomine

  rabbitmqtest:
    image: cytomine/rabbitmq:v1.1.2
    ports: [ "5673:5672", "15673:15672" ]
    restart: unless-stopped

  ldaptest:
    image: upekshejay/simple-ldap-test-server
    ports: [ "390:389", "637:636" ]
    restart: unless-stopped
    volumes:
      - "./test/ldap/store.json:/app/etc/store.json"
      - "./test/ldap/default.json:/app/config/default.json"

